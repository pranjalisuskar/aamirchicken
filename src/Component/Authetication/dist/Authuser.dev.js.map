{"version":3,"sources":["Authuser.js"],"names":["Authuser","navigate","getToken","tokenString","sessionStorage","getItem","JSON","parse","error","console","getUser","userString","saveToken","user","token","setItem","stringify","setToken","setUser","http","axios","create","baseURL","headers","Authorization","defaults","logout","clear"],"mappings":";;;;;;;;;AAAA;;AACA;;AACA;;;;;;;;;;;;;;;;AAEA,IAAMA,QAAQ,GAAG,SAAXA,QAAW,GAAM;AACrB,MAAMC,QAAQ,GAAG,kCAAjB,CADqB,CAGrB;;AACA,MAAMC,QAAQ,GAAG,SAAXA,QAAW,GAAM;AACrB,QAAI;AACF,UAAMC,WAAW,GAAGC,cAAc,CAACC,OAAf,CAAuB,OAAvB,CAApB;AACA,aAAOF,WAAW,GAAGG,IAAI,CAACC,KAAL,CAAWJ,WAAX,CAAH,GAA6B,IAA/C;AACD,KAHD,CAGE,OAAOK,KAAP,EAAc;AACdC,MAAAA,OAAO,CAACD,KAAR,CAAc,wBAAd,EAAwCA,KAAxC;AACA,aAAO,IAAP;AACD;AACF,GARD;;AAUA,MAAME,OAAO,GAAG,SAAVA,OAAU,GAAM;AACpB,QAAI;AACF,UAAMC,UAAU,GAAGP,cAAc,CAACC,OAAf,CAAuB,MAAvB,CAAnB;AACA,aAAOM,UAAU,GAAGL,IAAI,CAACC,KAAL,CAAWI,UAAX,CAAH,GAA4B,IAA7C;AACD,KAHD,CAGE,OAAOH,KAAP,EAAc;AACdC,MAAAA,OAAO,CAACD,KAAR,CAAc,uBAAd,EAAuCA,KAAvC;AACA,aAAO,IAAP;AACD;AACF,GARD;;AAUA,MAAMI,SAAS,GAAG,SAAZA,SAAY,CAACC,IAAD,EAAOC,KAAP,EAAiB;AACjCV,IAAAA,cAAc,CAACW,OAAf,CAAuB,OAAvB,EAAgCT,IAAI,CAACU,SAAL,CAAeF,KAAf,CAAhC;AACAV,IAAAA,cAAc,CAACW,OAAf,CAAuB,MAAvB,EAA+BT,IAAI,CAACU,SAAL,CAAeH,IAAf,CAA/B,EAFiC,CAEqB;;AACtDI,IAAAA,QAAQ,CAACH,KAAD,CAAR;AACAI,IAAAA,OAAO,CAACL,IAAD,CAAP;AACD,GALD;;AAxBqB,kBAgCK,qBAASX,QAAQ,EAAjB,CAhCL;AAAA;AAAA,MAgCdY,KAhCc;AAAA,MAgCPG,QAhCO;;AAAA,mBAiCG,qBAASP,OAAO,EAAhB,CAjCH;AAAA;AAAA,MAiCdG,IAjCc;AAAA,MAiCRK,OAjCQ,kBAmCrB;;;AACA,MAAMC,IAAI,GAAGC,kBAAMC,MAAN,CAAa;AACxBC,IAAAA,OAAO,EAAE,+BADe;AAExBC,IAAAA,OAAO,EAAE;AACP,sBAAgB,qBADT;AAEPC,MAAAA,aAAa,EAAEV,KAAK,oBAAaA,KAAb,IAAuB,EAFpC,CAEwC;;AAFxC;AAFe,GAAb,CAAb,CApCqB,CA4CrB;;;AACA,wBAAU,YAAM;AACdK,IAAAA,IAAI,CAACM,QAAL,CAAcF,OAAd,CAAsBC,aAAtB,GAAsCV,KAAK,oBAAaA,KAAb,IAAuB,EAAlE,CADc,CACwD;AACvE,GAFD,EAEG,CAACA,KAAD,CAFH,EA7CqB,CAiDrB;;AACA,MAAMY,MAAM,GAAG,SAATA,MAAS,GAAM;AACnBtB,IAAAA,cAAc,CAACuB,KAAf;AACAV,IAAAA,QAAQ,CAAC,IAAD,CAAR;AACAC,IAAAA,OAAO,CAAC,IAAD,CAAP;AACAjB,IAAAA,QAAQ,CAAC,GAAD,CAAR;AACD,GALD;;AAOA,SAAO;AACLgB,IAAAA,QAAQ,EAAEL,SADL;AAELE,IAAAA,KAAK,EAALA,KAFK;AAGLD,IAAAA,IAAI,EAAJA,IAHK;AAILM,IAAAA,IAAI,EAAJA,IAJK;AAKLO,IAAAA,MAAM,EAANA;AALK,GAAP;AAOD,CAhED;;eAkEe1B,Q","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst Authuser = () => {\r\n  const navigate = useNavigate();\r\n\r\n  // Helper functions for session management\r\n  const getToken = () => {\r\n    try {\r\n      const tokenString = sessionStorage.getItem('token');\r\n      return tokenString ? JSON.parse(tokenString) : null;\r\n    } catch (error) {\r\n      console.error('Failed to parse token:', error);\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const getUser = () => {\r\n    try {\r\n      const userString = sessionStorage.getItem('user');\r\n      return userString ? JSON.parse(userString) : null;\r\n    } catch (error) {\r\n      console.error('Failed to parse user:', error);\r\n      return null;\r\n    }\r\n  };\r\n\r\n  const saveToken = (user, token) => {\r\n    sessionStorage.setItem('token', JSON.stringify(token));\r\n    sessionStorage.setItem('user', JSON.stringify(user)); // Save user data\r\n    setToken(token);\r\n    setUser(user);\r\n  };\r\n  \r\n\r\n  const [token, setToken] = useState(getToken());\r\n  const [user, setUser] = useState(getUser());\r\n\r\n  // Create Axios instance with dynamic headers\r\n  const http = axios.create({\r\n    baseURL: 'http://localhost:5001/userAPI',\r\n    headers: {\r\n      'Content-Type': 'multipart/form-data',\r\n      Authorization: token ? `Bearer ${token}` : '', // Fix: Correct use of template literal\r\n    },\r\n  });\r\n\r\n  // Update axios headers whenever the token changes\r\n  useEffect(() => {\r\n    http.defaults.headers.Authorization = token ? `Bearer ${token}` : ''; // Fix: Correct use of template literal\r\n  }, [token]);\r\n\r\n  // Handle logout and navigate to home\r\n  const logout = () => {\r\n    sessionStorage.clear();\r\n    setToken(null);\r\n    setUser(null);\r\n    navigate('/');\r\n  };\r\n\r\n  return {\r\n    setToken: saveToken,\r\n    token,\r\n    user,\r\n    http,\r\n    logout,\r\n  };\r\n};\r\n\r\nexport default Authuser;"],"file":"Authuser.dev.js"}